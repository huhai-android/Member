webpackJsonp([116],{"8/7j":function(t,e,n){"use strict";function a(t){n("ynDB")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("pKZN"),r=n("84iU"),d=n.n(r),s=(i.a,{components:{back:i.a},data:function(){return{list:[],relation:[],patient:{PatientId:0},user:this.$store.state.userInfo,defalut:null}},created:function(){this.pull()},methods:{pull:function(){var t=this;d.a.all([this.$get("PlatFormAPI/PatientAccount/QueryPatientVisitByAccountId",{AccountId:this.user.User.AccountId}),this.$get("PlatFormAPI/Category/QueryItemByCategoryId",{CategoryId:16})]).then(function(e){if(t.list=e[0],e[0].forEach(function(e){e.PatientId==t.$store.state.reportId&&(t.patient=e),1==e.DefaultPatient&&(t.defalut=e)}),t.patient&&t.patient.PatientId||(t.patient=t.defalut),t.relation=e[1],!t.defalut.PatientName||!t.defalut.PatientSex||!t.defalut.Age)return t.$toast("请先完善资料"),t.$router.replace("/Patient-add?edit=true&PatientId="+t.defalut.PatientId+"&fromReport=1&isFirst=1&DrId="+t.$route.query.DrId+"&DrName="+t.$route.query.DrName+"&DrType="+t.$route.query.DrType)})},goAddPat:function(){this.$router.replace("/Patient-add?fromReport=1&DrId="+this.$route.query.DrId+"&DrName="+this.$route.query.DrName+"&DrType="+this.$route.query.DrType)},confirm:function(){var t=this;return this.patient.PatientId?this.patient.PatientName&&this.patient.PatientSex?void this.$post("/PlatFormAPI/DoctorPatient/SaveDoctorPatient",{DrId:this.$route.query.DrId,PatientId:this.patient.PatientId,DrName:this.$route.query.DrName,APPType:2,APPId:1}).then(function(e){t.$toast("患者报道成功"),1==t.$route.query.DrType?t.$router.push("/doctor-index?DrId="+t.$route.query.DrId):2==t.$route.query.DrType&&t.$router.push("/nurse-index?DrId="+t.$route.query.DrId)}):(this.$toast("请先完善资料"),this.$router.push({path:"/Patient-add",query:{edit:"true",PatientId:this.patient.PatientId,fromReport:1,DrId:this.$route.query.DrId,DrName:this.$route.query.DrName,DrType:this.$route.query.DrType}})):this.$toast("请选择就诊人")}}}),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pdt"},[n("div",{ref:"el",staticClass:"title"},[n("back"),t._v(" "),n("span",{staticClass:"name"},[t._v("患者报道")]),t._v(" "),n("a")],1),t._v(" "),n("p",{staticClass:"tip"},[t._v("请选择就诊人，与"+t._s(t.$route.query.DrName)+"医护建立关系")]),t._v(" "),t._l(t.list,function(e,a){return n("div",{key:a,staticClass:"card"},[n("div",{on:{click:function(n){t.patient=e}}},[n("p",[n("label",{class:{on:e.PatientId==t.patient.PatientId}}),t._v(" "),n("span",[t._v(t._s("未知"==e.PatientName?"":e.PatientName))]),t._v(" "),n("span",[t._v(t._s(t._f("toSex")(e.PatientSex)))]),t._v(" "),n("span",[t._v(t._s(e.Age))]),t._v(" "),n("span",[t._v(t._s(t._f("Category")(e.PatientType,t.relation)))])]),t._v(" "),e.DefaultPatient?n("span",{staticClass:"default"},[t._v("默认")]):t._e()]),t._v(" "),n("p",{staticClass:"phone",on:{click:function(n){t.patient=e}}},[t.$route.query.toChoose?n("i",{staticClass:"plhd"}):t._e(),t._v(" "),n("span",[t._v(t._s(e.Mobile.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")))]),t._v(" "),n("span",[t._v(t._s(e.CredNo?e.CredNo.substr(0,4)+"**********"+e.CredNo.substr(14):""))])])])}),t._v(" "),n("div",{staticClass:"btn",on:{click:t.confirm}},[t._v("我要报道")]),t._v(" "),n("p",{staticClass:"bTip"},[t._v("\n        如果需要报道的是其他就诊人，请直接\n        "),n("span",{on:{click:t.goAddPat}},[t._v("添加就诊人")])])],2)},c=[],l={render:o,staticRenderFns:c},u=l,p=n("C7Lr"),f=a,b=p(s,u,!1,f,"data-v-30da26d6",null);e.default=b.exports},p9pr:function(t,e,n){var a=n("L4zZ");e=t.exports=n("UTlt")(!1),e.push([t.i,"\n.tip[data-v-30da26d6] {\n  height: 1.17333rem;\n  color: #fff;\n  background: #ffa417;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n          justify-content: center;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n}\n.card[data-v-30da26d6] {\n  background: #fff;\n  margin: 0.26667rem;\n  padding: 0.26667rem;\n  border-radius: 20px;\n}\n.card div[data-v-30da26d6] {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n    -webkit-box-pack: justify;\n    -webkit-justify-content: space-between;\n            justify-content: space-between;\n}\n.card label[data-v-30da26d6] {\n    display: block;\n    width: 0.6rem;\n    height: 0.6rem;\n    background: url("+a(n("1ST3"))+") no-repeat center;\n    background-size: contain;\n}\n.card .on[data-v-30da26d6] {\n    background: url("+a(n("uE3D"))+") no-repeat center;\n    background-size: contain;\n    border-radius: 0;\n}\n.card p[data-v-30da26d6] {\n    height: 0.73333rem;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n}\n.card p span[data-v-30da26d6] {\n      margin: 0 0.4rem;\n}\n.card p .plhd[data-v-30da26d6] {\n      display: block;\n      width: 0.6rem;\n      height: 0.6rem;\n}\n.card .default[data-v-30da26d6] {\n    border: 1px solid #ffa417;\n    color: #ffa417;\n    border-radius: 5px;\n    padding: 0 0.06667rem;\n}\n.card .edit[data-v-30da26d6] {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-pack: end;\n    -webkit-justify-content: flex-end;\n            justify-content: flex-end;\n    border-top: 1px solid #ececec;\n    height: 1.17333rem;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n    color: #999;\n}\n.card .edit span[data-v-30da26d6] {\n      display: -webkit-box;\n      display: -webkit-flex;\n      display: flex;\n      -webkit-box-align: center;\n      -webkit-align-items: center;\n              align-items: center;\n}\n.card .edit i[data-v-30da26d6] {\n      display: block;\n      width: 0.53333rem;\n      height: 0.53333rem;\n      margin-right: 0.26667rem;\n      background: url("+a(n("9aHa"))+") no-repeat center;\n      background-size: contain;\n}\n.card .phone[data-v-30da26d6] {\n    color: #999;\n    padding: 0.4rem 0 0.66667rem 0;\n}\n.btn[data-v-30da26d6] {\n  background: #2f68ca;\n  color: #fff;\n  height: 1.17333rem;\n  border-radius: 20px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n          justify-content: center;\n  width: 80%;\n  margin: 1.33333rem auto 0.4rem;\n  font-size: 16px;\n}\n.bTip[data-v-30da26d6] {\n  text-align: center;\n  color: #999;\n  font-size: 12px;\n}\n.bTip span[data-v-30da26d6] {\n    color: #2f68ca;\n}\n",""])},ynDB:function(t,e,n){var a=n("p9pr");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("FIqI")("38dc57b6",a,!0,{})}});