webpackJsonp([77],{bkLH:function(t,e,n){"use strict";function i(t){n("cGuS")}Object.defineProperty(e,"__esModule",{value:!0});var a=n("pKZN"),o=n("y0YP"),r=(a.a,{components:{back:a.a},data:function(){return{nickName:"",isif:!1,isPainet:!1,sumbitFrom:{PatientId:null,PatientName:"",Description:"",DrId:this.$route.query.drId,DrName:this.$route.query.name||""},patient:null,temp:!0,showConfirm:!1,user:this.$store.state.userInfo,show:!1,orderMsg:null,recordConfirm:null,Coupons:null}},created:function(){var t=this;this.$get("/SecondDiagnosisAPI/MedicalRecord/CheckDrSourceNumber",{DrId:this.$route.query.drId}).then(function(e){e?t.getDefault():t.show=!0})},beforeDestroy:function(){o.a.loadOut(),o.a.loadOut2()},methods:{sumbitInquiry:function(){var t=this;return this.patient.Age&&this.patient.PatientSex?(this.sumbitFrom.PatientId=this.patient.PatientId,this.sumbitFrom.PatientName=this.patient.PatientName,0==this.sumbitFrom.PatientId.length?this.$toast("请选择就诊人"):this.sumbitFrom.Description.length<10?this.$toast("请填写至少10个字的问诊内容"):void this.$post("/SecondDiagnosisAPI/MedicalRecord/SaveMedicalDoctorRecord",this.sumbitFrom).then(function(e){t.$store.dispatch("pushsecDeterPay",e),t.orderMsg=e,t.$route.query.ConsultNow?t.payMsg():t.$router.push({path:"/deterPay",query:{mname:e.RelationName,way:0}})})):this.showConfirm=!0},payMsg:function(){var t=this;this.$post("/PlatFormAPI/ServicePackItem/MedicalRecordConfirm",{PatientId:this.orderMsg.PatientId,MedicalType:this.orderMsg.MedicalType,RelationId:this.orderMsg.RelationId,RelationName:this.orderMsg.RelationName,MedicalRecordId:this.orderMsg.MedicalRecordId,PayOrderId:this.$route.query.PayOrderId,DetailType:this.$route.query.DetailType,DetailId:this.$route.query.DetailId}).then(function(e){t.recordConfirm=e,t.recordConfirm.CouponRecordId&&t.recordConfirm.CouponRecordId>0&&(t.Coupons={CouponRecordId:t.recordConfirm.CouponRecordId,CouponName:t.recordConfirm.CouponName}),t.pay()})},pay:function(){var t=this;if(!this.Coupons||0==this.Coupons.CouponRecordId)return this.$store.dispatch("pushsecDeterPay",this.orderMsg),this.$router.push({path:"/deterPay",query:{mname:this.orderMsg.RelationName}}),!1;o.a.loadIn2(),this.$post("/PlatFormAPI/ServicePackItem/BuyMedicalRecord",{PatientId:this.orderMsg.PatientId,PatientName:this.orderMsg.PatientName,MedicalType:this.orderMsg.MedicalType,RelationId:this.orderMsg.RelationId,RelationName:this.orderMsg.RelationName,ServiceItemId:this.recordConfirm.ServiceItemId,MedicalRecordId:this.orderMsg.MedicalRecordId,CouponRecordId:this.Coupons.CouponRecordId,BuyWay:2,PayChannel:1,PayType:1,RecommendId:0,RecommendName:"",Application:0,APPId:1}).then(function(e){o.a.loadOut2(),t.Coupons&&t.Coupons.CouponRecordId>0&&(sessionStorage.removeItem(localStorage.appid+"_deterPay"),t.$router.replace("/SecondDiagnosis-order"))})},choosePatient:function(){if(this.$route.query.ConsultNow)return!1;this.patient&&this.patient.PatientId?this.$router.push({path:"/Patient-list",query:{PatientId:this.patient.PatientId,toChoose:1}}):this.$router.push("/Patient-list?toChoose=1")},getDefault:function(){var t=this;this.$store.state.patient&&(this.patient=this.$store.state.patient),this.patient&&!this.patient.Age?this.showConfirm=!0:this.$get("PlatFormAPI/PatientAccount/QueryDefaultPatientByAccountId",{AccountId:this.user.User.AccountId}).then(function(e){e.Age&&e.Age||(t.showConfirm=!0),t.patient=e})},confirm:function(){this.$router.push("/Patient-add?fromCenter=1")},getDrList:function(){this.$router.replace("/secDrList")}}}),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pdt"},[n("div",{ref:"el",staticClass:"title"},[n("back"),t._v(" "),n("span",{staticClass:"name"},[t._v("填写病情描述")]),t._v(" "),n("a")],1),t._v(" "),n("p",{staticClass:"tip"},[t._v("为保护您的隐私，请不要输入微信号，住址等信息")]),t._v(" "),n("p",{staticClass:"pat",on:{click:function(e){return t.choosePatient()}}},[t.patient?n("span",[n("i",{staticClass:"icon1"}),t._v(t._s(t.patient&&t.patient.PatientName?t.patient.PatientName:"")+"\n        ")]):t._e(),t._v(" "),n("i",{staticClass:"icon2"})]),t._v(" "),n("div",{staticClass:"content"},[t._m(0),t._v(" "),n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.sumbitFrom.Description,expression:"sumbitFrom.Description"}],attrs:{maxlength:"200",placeholder:"请您填写您希望咨询医生或希望医生帮您解决的主要问题，例如针对已有诊断、现在服用的药品、治疗方案、康复计划等问题提出您的主要诉求。至少输入10个字。"},domProps:{value:t.sumbitFrom.Description},on:{input:function(e){e.target.composing||t.$set(t.sumbitFrom,"Description",e.target.value)}}}),t._v(" "),n("p",{staticClass:"max"},[n("span",[t._v(t._s(t.sumbitFrom.Description.length)+"/200")])])])]),t._v(" "),n("span",{staticClass:"btn",on:{click:t.sumbitInquiry}},[t._v("提交")]),t._v(" "),n("confirm",{on:{"on-cancel":function(e){t.showConfirm=!1},"on-confirm":t.confirm},model:{value:t.showConfirm,callback:function(e){t.showConfirm=e},expression:"showConfirm"}},[t._v("根据互联网医院相关法规，就诊人需完善信息才可继续问诊，是否前往完善就诊人信息")]),t._v(" "),n("confirm",{attrs:{title:"温馨提示","show-cancel-button":!1,"confirm-text":"重新找医生"},on:{"on-confirm":t.getDrList},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t._v("该医生今日的号源已用完，是否需要寻找其他的医生问诊？")])],1)},c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("i",{staticClass:"icon3"}),t._v("病情描述")])}],d={render:s,staticRenderFns:c},l=d,u=n("C7Lr"),p=i,f=u(r,l,!1,p,"data-v-a5f742f0",null);e.default=f.exports},cGuS:function(t,e,n){var i=n("qEuu");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("FIqI")("5f0ee866",i,!0,{})},qEuu:function(t,e,n){var i=n("L4zZ");e=t.exports=n("UTlt")(!1),e.push([t.i,"\n.tip[data-v-a5f742f0] {\n  height: 1.06667rem;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n          justify-content: center;\n  background: #ffa417;\n  color: #fff;\n}\n.tips[data-v-a5f742f0] {\n  height: 1.06667rem;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n          justify-content: center;\n  color: #999;\n  font-size: 13px;\n}\n.bt[data-v-a5f742f0] {\n  border-top: 1px solid #ececec;\n}\n.pat[data-v-a5f742f0] {\n  height: 1.17333rem;\n  padding: 0 0.4rem;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n  -webkit-justify-content: space-between;\n          justify-content: space-between;\n  background: #fff;\n}\n.pat span[data-v-a5f742f0] {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n}\n.pat i[data-v-a5f742f0] {\n    display: block;\n    width: 0.4rem;\n    height: 0.4rem;\n}\n.pat .icon1[data-v-a5f742f0] {\n    background: url("+i(n("sTkO"))+") no-repeat center;\n    background-size: contain;\n    margin-right: 0.13333rem;\n}\n.pat .icon2[data-v-a5f742f0] {\n    background: url("+i(n("i9Xb"))+") no-repeat center;\n    background-size: contain;\n}\n.content[data-v-a5f742f0] {\n  margin-top: 0.26667rem;\n  background: #fff;\n}\n.content p[data-v-a5f742f0] {\n    padding: 0.4rem;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n}\n.content .icon3[data-v-a5f742f0] {\n    display: block;\n    width: 0.4rem;\n    height: 0.4rem;\n    margin-right: 0.13333rem;\n    background: url("+i(n("zv6d"))+") no-repeat center;\n    background-size: contain;\n}\n.content textarea[data-v-a5f742f0] {\n    width: 90%;\n    height: 3.33333rem;\n    display: block;\n    margin: auto;\n    border-radius: 10px;\n    border: 1px solid #ececec;\n    resize: none;\n    padding: 0.4rem;\n    font-size: 14px;\n    line-height: 1.5;\n}\n.content .max[data-v-a5f742f0] {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-pack: end;\n    -webkit-justify-content: flex-end;\n            justify-content: flex-end;\n    color: #999;\n}\n.btn[data-v-a5f742f0] {\n  width: 80%;\n  height: 1.17333rem;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n          justify-content: center;\n  margin: 0.66667rem auto;\n  background: #2f68ca;\n  border-radius: 30px;\n  font-size: 18px;\n  color: #fff;\n}\n",""])}});